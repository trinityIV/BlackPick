<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trinity</title>
</head>
<body>
    <img id="gameStream" alt="Streaming du jeu" width="100%" height="auto">
    <script>
        const ws = new WebSocket("ws://localhost:8181");
        const imgElement = document.getElementById("gameStream");

        ws.onmessage = function(event) {
            const blob = new Blob([event.data], { type: "image/jpeg" });
            const url = URL.createObjectURL(blob);
            imgElement.src = url;
        };

        document.addEventListener('keydown', function(event) {
            ws.send(JSON.stringify({ type: 'keydown', key: event.key }));
        });

        document.addEventListener('keyup', function(event) {
            ws.send(JSON.stringify({ type: 'keyup', key: event.key }));
        });

        document.addEventListener('mousemove', function(event) {
            ws.send(JSON.stringify({ type: 'mousemove', x: event.clientX, y: event.clientY }));
        });

        document.addEventListener('click', function(event) {
            ws.send(JSON.stringify({ type: 'click', button: event.button }));
        });
    </script>
</body>
</html>
